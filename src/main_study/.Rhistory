df_closed_models %>%
ggplot(aes(x = response)) +
geom_histogram(alpha = .6) +
theme_minimal() +
facet_wrap(~model_name + condition)
df_closed_models %>%
ggplot(aes(x = response)) +
geom_bar(stat = "count") +
theme_minimal() +
facet_wrap(~model_name + condition)
df_closed_models %>%
ggplot(aes(x = response, fill = condition)) +
geom_bar(stat = "count") +
theme_minimal() +
facet_wrap(~model_name + condition)
df_closed_models %>%
ggplot(aes(x = response, fill = condition)) +
geom_bar(stat = "count") +
theme_minimal() +
facet_wrap(~model_name + condition) +
scale_fill_viridis_d() +
theme(axis.title = element_text(size=rel(1.2)),
axis.text = element_text(size = rel(1.2)),
legend.text = element_text(size = rel(1.2)),
# legend.title = element_text(size = rel(1.5)),
strip.text.x = element_text(size = rel(1.2)),
legend.position = "bottom")
df_closed_models %>%
ggplot(aes(x = response, fill = condition)) +
geom_bar(stat = "count") +
theme_minimal() +
facet_wrap(~model_name + condition) +
scale_fill_viridis_d() +
theme(axis.title = element_text(size=rel(1.2)),
axis.text = element_text(size = rel(1.2)),
legend.text = element_text(size = rel(1.2)),
# legend.title = element_text(size = rel(1.5)),
strip.text.x = element_text(size = rel(1.2)),
legend.position = "none")
df_closed_models %>%
ggplot(aes(x = response, fill = condition)) +
geom_bar(stat = "count") +
theme_minimal() +
facet_wrap(~model_name + condition) +
scale_fill_viridis_d() +
labs(x = "Response") +
theme(axis.title = element_text(size=rel(1.2)),
axis.text = element_text(size = rel(1.2)),
legend.text = element_text(size = rel(1.2)),
# legend.title = element_text(size = rel(1.5)),
strip.text.x = element_text(size = rel(1.2)),
legend.position = "none")
df_merged = df_merged %>%
group_by(model_name, version) %>%
mutate(response_z = scale(response))
df_accuracy = df_merged %>%
#select(condition, response_z, group_id, text,
#       model_name, version, prompt_type) %>%
select(-response, -img_name) %>%
#filter(condition != "Related") %>%
pivot_wider(
names_from = condition,
values_from = c(response_z),
names_prefix = "condition_"
) %>%
mutate(diff_main = condition_Afforded - `condition_Non-Afforded`,
diff_manipulation_check = condition_Related -`condition_Non-Afforded`) %>%
mutate(accuracy_main = diff_main > 0,
accuracy_manipulation_check = diff_manipulation_check > 0)
df_accuracy %>%
filter(version == "natural") %>%
filter(prompt_type == "implicit") %>%
ggplot(aes(x = group_id, y = diff_main)) +
geom_bar(stat = "identity") +
# geom_vline(xintercept = 0, linetype = "dotted") +
facet_wrap(~model_name)
mean(df_accuracy$accuracy_main)
mean(df_accuracy$accuracy_manipulation_check)
accuracy_by_model = df_accuracy %>%
group_by(model_name) %>%
summarise(avg_accuracy_main = mean(accuracy_main))
accuracy_by_model
accuracy_by_model = df_accuracy %>%
group_by(model_name) %>%
summarise(avg_accuracy_main = mean(accuracy_main),
avg_accuracy_manipulation = mean(accuracy_manipulation_check))
accuracy_by_model
accuracy_by_model %>%
ggplot(aes(x = model_name, y = avg_accuracy_main)) +
geom_bar(stat = "identity") +
scale_fill_viridis_d() +
labs(x = "Model") +
theme(axis.title = element_text(size=rel(1.2)),
axis.text = element_text(size = rel(1.2)),
legend.text = element_text(size = rel(1.2)),
# legend.title = element_text(size = rel(1.5)),
strip.text.x = element_text(size = rel(1.2)),
legend.position = "none")
accuracy_by_model %>%
ggplot(aes(x = model_name, y = avg_accuracy_main)) +
geom_bar(stat = "identity") +
scale_fill_viridis_d() +
labs(x = "Model") +
coord_flip() +
theme(axis.title = element_text(size=rel(1.2)),
axis.text = element_text(size = rel(1.2)),
legend.text = element_text(size = rel(1.2)),
# legend.title = element_text(size = rel(1.5)),
strip.text.x = element_text(size = rel(1.2)),
legend.position = "none")
accuracy_by_model %>%
ggplot(aes(x = model_name, y = avg_accuracy_main)) +
geom_bar(stat = "identity") +
scale_fill_viridis_d() +
labs(x = "Model") +
coord_flip() +
theme_minimal() +
theme(axis.title = element_text(size=rel(1.2)),
axis.text = element_text(size = rel(1.2)),
legend.text = element_text(size = rel(1.2)),
# legend.title = element_text(size = rel(1.5)),
strip.text.x = element_text(size = rel(1.2)),
legend.position = "none")
accuracy_by_model %>%
ggplot(aes(x = reorder(model_name, avg_accuracy_main),
y = avg_accuracy_main)) +
geom_bar(stat = "identity") +
scale_fill_viridis_d() +
labs(x = "Model") +
coord_flip() +
theme_minimal() +
theme(axis.title = element_text(size=rel(1.2)),
axis.text = element_text(size = rel(1.2)),
legend.text = element_text(size = rel(1.2)),
# legend.title = element_text(size = rel(1.5)),
strip.text.x = element_text(size = rel(1.2)),
legend.position = "none")
accuracy_by_model %>%
ggplot(aes(x = reorder(model_name, avg_accuracy_main),
y = avg_accuracy_main)) +
geom_bar(stat = "identity") +
scale_fill_viridis_d() +
labs(x = "Model",
y = "Accuracy (Afforded vs. Non-Afforded)") +
coord_flip() +
theme_minimal() +
theme(axis.title = element_text(size=rel(1.2)),
axis.text = element_text(size = rel(1.2)),
legend.text = element_text(size = rel(1.2)),
# legend.title = element_text(size = rel(1.5)),
strip.text.x = element_text(size = rel(1.2)),
legend.position = "none")
accuracy_by_model %>%
ggplot(aes(x = reorder(avg_accuracy_manipulation, avg_accuracy_manipulation),
y = avg_accuracy_main)) +
geom_bar(stat = "identity") +
scale_fill_viridis_d() +
labs(x = "Model",
y = "Accuracy (Canonical vs. Non-Afforded)") +
coord_flip() +
theme_minimal() +
theme(axis.title = element_text(size=rel(1.2)),
axis.text = element_text(size = rel(1.2)),
legend.text = element_text(size = rel(1.2)),
# legend.title = element_text(size = rel(1.5)),
strip.text.x = element_text(size = rel(1.2)),
legend.position = "none")
accuracy_by_model %>%
ggplot(aes(x = reorder(model_name, avg_accuracy_manipulation),
y = avg_accuracy_main)) +
geom_bar(stat = "identity") +
scale_fill_viridis_d() +
labs(x = "Model",
y = "Accuracy (Canonical vs. Non-Afforded)") +
coord_flip() +
theme_minimal() +
theme(axis.title = element_text(size=rel(1.2)),
axis.text = element_text(size = rel(1.2)),
legend.text = element_text(size = rel(1.2)),
# legend.title = element_text(size = rel(1.5)),
strip.text.x = element_text(size = rel(1.2)),
legend.position = "none")
accuracy_by_model %>%
ggplot(aes(x = reorder(model_name, avg_accuracy_main),
y = avg_accuracy_manipulation)) +
geom_bar(stat = "identity") +
scale_fill_viridis_d() +
labs(x = "Model",
y = "Accuracy (Canonical vs. Non-Afforded)") +
coord_flip() +
theme_minimal() +
theme(axis.title = element_text(size=rel(1.2)),
axis.text = element_text(size = rel(1.2)),
legend.text = element_text(size = rel(1.2)),
# legend.title = element_text(size = rel(1.5)),
strip.text.x = element_text(size = rel(1.2)),
legend.position = "none")
df_accuracy = df_merged %>%
select(condition, response_z, group_id, text,
model_name) %>%
#filter(condition != "Related") %>%
pivot_wider(
names_from = condition,
values_from = c(response_z),
names_prefix = "condition_"
) %>%
mutate(diff_main = condition_Afforded - `condition_Non-Afforded`,
diff_manipulation_check = condition_Related -`condition_Non-Afforded`) %>%
mutate(accuracy_main = diff_main > 0,
accuracy_manipulation_check = diff_manipulation_check > 0)
df_accuracy %>%
filter(version == "natural") %>%
filter(prompt_type == "implicit") %>%
ggplot(aes(x = group_id, y = diff_main)) +
geom_bar(stat = "identity") +
# geom_vline(xintercept = 0, linetype = "dotted") +
facet_wrap(~model_name)
df_accuracy %>%
ggplot(aes(x = group_id, y = diff_main)) +
geom_bar(stat = "identity") +
# geom_vline(xintercept = 0, linetype = "dotted") +
facet_wrap(~model_name)
df_accuracy %>%
ggplot(aes(x = group_id, y = diff_main)) +
geom_bar(stat = "identity") +
# geom_vline(xintercept = 0, linetype = "dotted") +
facet_wrap(~model_name) +
theme(axis.title = element_text(size=rel(1.2)),
axis.text = element_text(size = rel(1.2)),
legend.text = element_text(size = rel(1.2)),
# legend.title = element_text(size = rel(1.5)),
strip.text.x = element_text(size = rel(1.2)),
legend.position = "none")
df_accuracy %>%
ggplot(aes(x = group_id, y = diff_main)) +
geom_bar(stat = "identity") +
# geom_vline(xintercept = 0, linetype = "dotted") +
facet_wrap(~model_name) +
theme_minimal() +
labs(x = "Item Number",
y = "Difference (Afforded vs. Non-Afforded)") +
theme(axis.title = element_text(size=rel(1.2)),
axis.text = element_text(size = rel(1.2)),
legend.text = element_text(size = rel(1.2)),
# legend.title = element_text(size = rel(1.5)),
strip.text.x = element_text(size = rel(1.2)),
legend.position = "none")
df_accuracy %>%
ggplot(aes(x = group_id, y = diff_main)) +
geom_bar(stat = "identity") +
# geom_vline(xintercept = 0, linetype = "dotted") +
facet_wrap(~model_name) +
theme_minimal() +
geom_hline(yintercept = 0, linetype = "dotted") +
labs(x = "Item Number",
y = "Difference (Afforded vs. Non-Afforded)") +
coord_flip() +
theme(axis.title = element_text(size=rel(1.2)),
axis.text = element_text(size = rel(1.2)),
legend.text = element_text(size = rel(1.2)),
# legend.title = element_text(size = rel(1.5)),
strip.text.x = element_text(size = rel(1.2)),
legend.position = "none")
df_accuracy %>%
ggplot(aes(x = group_id, y = diff_main)) +
geom_bar(stat = "identity") +
# geom_vline(xintercept = 0, linetype = "dotted") +
facet_wrap(~model_name) +
theme_minimal() +
geom_hline(yintercept = 0, linetype = "dotted") +
labs(x = "Item Number",
y = "Difference (Afforded vs. Non-Afforded)") +
theme(axis.title = element_text(size=rel(1.2)),
axis.text = element_text(size = rel(1.2)),
legend.text = element_text(size = rel(1.2)),
# legend.title = element_text(size = rel(1.5)),
strip.text.x = element_text(size = rel(1.2)),
legend.position = "none")
mean(df_accuracy$accuracy_main)
mean(df_accuracy$accuracy_manipulation_check)
accuracy_by_model = df_accuracy %>%
group_by(model_name) %>%
summarise(avg_accuracy_main = mean(accuracy_main),
avg_accuracy_manipulation = mean(accuracy_manipulation_check))
accuracy_by_model
accuracy_by_model %>%
ggplot(aes(x = reorder(model_name, avg_accuracy_main),
y = avg_accuracy_main)) +
geom_bar(stat = "identity") +
scale_fill_viridis_d() +
labs(x = "Model",
y = "Accuracy (Afforded vs. Non-Afforded)") +
coord_flip() +
theme_minimal() +
theme(axis.title = element_text(size=rel(1.2)),
axis.text = element_text(size = rel(1.2)),
legend.text = element_text(size = rel(1.2)),
# legend.title = element_text(size = rel(1.5)),
strip.text.x = element_text(size = rel(1.2)),
legend.position = "none")
accuracy_by_model %>%
ggplot(aes(x = reorder(model_name, avg_accuracy_main),
y = avg_accuracy_manipulation)) +
geom_bar(stat = "identity") +
scale_fill_viridis_d() +
labs(x = "Model",
y = "Accuracy (Canonical vs. Non-Afforded)") +
coord_flip() +
theme_minimal() +
theme(axis.title = element_text(size=rel(1.2)),
axis.text = element_text(size = rel(1.2)),
legend.text = element_text(size = rel(1.2)),
# legend.title = element_text(size = rel(1.5)),
strip.text.x = element_text(size = rel(1.2)),
legend.position = "none")
df_accuracy = df_merged %>%
select(condition, response_z, group_id, text,
model_name, architecture) %>%
#filter(condition != "Related") %>%
pivot_wider(
names_from = condition,
values_from = c(response_z),
names_prefix = "condition_"
) %>%
mutate(diff_main = condition_Afforded - `condition_Non-Afforded`,
diff_manipulation_check = condition_Related -`condition_Non-Afforded`) %>%
mutate(accuracy_main = diff_main > 0,
accuracy_manipulation_check = diff_manipulation_check > 0)
df_accuracy %>%
ggplot(aes(x = group_id, y = diff_main)) +
geom_bar(stat = "identity") +
# geom_vline(xintercept = 0, linetype = "dotted") +
facet_wrap(~model_name) +
theme_minimal() +
geom_hline(yintercept = 0, linetype = "dotted") +
labs(x = "Item Number",
y = "Difference (Afforded vs. Non-Afforded)") +
theme(axis.title = element_text(size=rel(1.2)),
axis.text = element_text(size = rel(1.2)),
legend.text = element_text(size = rel(1.2)),
# legend.title = element_text(size = rel(1.5)),
strip.text.x = element_text(size = rel(1.2)),
legend.position = "none")
accuracy_by_model = df_accuracy %>%
group_by(model_name, architecture) %>%
summarise(avg_accuracy_main = mean(accuracy_main),
avg_accuracy_manipulation = mean(accuracy_manipulation_check))
accuracy_by_model
accuracy_by_model %>%
ggplot(aes(x = reorder(model_name, avg_accuracy_main),
y = avg_accuracy_main,
fill = architecture)) +
geom_bar(stat = "identity") +
scale_fill_viridis_d() +
labs(x = "Model",
y = "Accuracy (Afforded vs. Non-Afforded)") +
coord_flip() +
theme_minimal() +
theme(axis.title = element_text(size=rel(1.2)),
axis.text = element_text(size = rel(1.2)),
legend.text = element_text(size = rel(1.2)),
# legend.title = element_text(size = rel(1.5)),
strip.text.x = element_text(size = rel(1.2)),
legend.position = "none")
setwd("/Users/seantrott/Dropbox/UCSD/Research/NLMs/llm_affordances/src/main_study/")
directory_path <- "../../data/processed/models/hf_models/"
csv_files <- list.files(path = directory_path, pattern = "*.csv", full.names = TRUE)
csv_list <- csv_files %>%
map(~ read_csv(.))
df_hf_models <- bind_rows(csv_list)
df_hf_models = df_hf_models %>%
mutate(condition = str_to_title(sub("_.*", "", condition)))
table(df_hf_models$model_name)
directory_path <- "../../data/processed/models/closed_models//"
csv_files <- list.files(path = directory_path, pattern = "*.csv", full.names = TRUE)
csv_list <- csv_files %>%
map(~ read_csv(.))
df_closed_models <- bind_rows(csv_list)
df_closed_models = df_closed_models %>%
mutate(condition = str_to_title(sub("_.*", "", condition)))
table(df_closed_models$model_name)
df_merged = df_hf_models %>%
bind_rows(df_closed_models)
df_closed_models %>%
ggplot(aes(x = response, fill = condition)) +
geom_bar(stat = "count") +
theme_minimal() +
facet_wrap(~model_name + condition) +
scale_fill_viridis_d() +
labs(x = "Response") +
theme(axis.title = element_text(size=rel(1.2)),
axis.text = element_text(size = rel(1.2)),
legend.text = element_text(size = rel(1.2)),
# legend.title = element_text(size = rel(1.5)),
strip.text.x = element_text(size = rel(1.2)),
legend.position = "none")
df_merged = df_merged %>%
group_by(model_name, version) %>%
mutate(response_z = scale(response))
df_accuracy = df_merged %>%
select(condition, response_z, group_id, text,
model_name) %>%
#filter(condition != "Related") %>%
pivot_wider(
names_from = condition,
values_from = c(response_z),
names_prefix = "condition_"
) %>%
mutate(diff_main = condition_Afforded - `condition_Non-Afforded`,
diff_manipulation_check = condition_Related -`condition_Non-Afforded`) %>%
mutate(accuracy_main = diff_main > 0,
accuracy_manipulation_check = diff_manipulation_check > 0)
df_accuracy %>%
ggplot(aes(x = group_id, y = diff_main)) +
geom_bar(stat = "identity") +
# geom_vline(xintercept = 0, linetype = "dotted") +
facet_wrap(~model_name) +
theme_minimal() +
geom_hline(yintercept = 0, linetype = "dotted") +
labs(x = "Item Number",
y = "Difference (Afforded vs. Non-Afforded)") +
theme(axis.title = element_text(size=rel(1.2)),
axis.text = element_text(size = rel(1.2)),
legend.text = element_text(size = rel(1.2)),
# legend.title = element_text(size = rel(1.5)),
strip.text.x = element_text(size = rel(1.2)),
legend.position = "none")
mean(df_accuracy$accuracy_main)
mean(df_accuracy$accuracy_manipulation_check)
accuracy_by_model = df_accuracy %>%
group_by(model_name, architecture) %>%
summarise(avg_accuracy_main = mean(accuracy_main),
avg_accuracy_manipulation = mean(accuracy_manipulation_check))
accuracy_by_model %>%
ggplot(aes(x = reorder(model_name, avg_accuracy_main),
y = avg_accuracy_manipulation)) +
geom_bar(stat = "identity") +
scale_fill_viridis_d() +
labs(x = "Model",
y = "Accuracy (Canonical vs. Non-Afforded)") +
coord_flip() +
theme_minimal() +
theme(axis.title = element_text(size=rel(1.2)),
axis.text = element_text(size = rel(1.2)),
legend.text = element_text(size = rel(1.2)),
# legend.title = element_text(size = rel(1.5)),
strip.text.x = element_text(size = rel(1.2)),
legend.position = "none")
accuracy_by_model %>%
ggplot(aes(x = reorder(model_name, avg_accuracy_main),
y = avg_accuracy_manipulation)) +
geom_bar(stat = "identity") +
scale_fill_viridis_d() +
labs(x = "Model",
y = "Accuracy (Canonical vs. Non-Afforded)") +
coord_flip() +
theme_minimal() +
scale_y_continuous(limits = c(0, 1)) +
theme(axis.title = element_text(size=rel(1.2)),
axis.text = element_text(size = rel(1.2)),
legend.text = element_text(size = rel(1.2)),
# legend.title = element_text(size = rel(1.5)),
strip.text.x = element_text(size = rel(1.2)),
legend.position = "none")
accuracy_by_model %>%
ggplot(aes(x = reorder(model_name, avg_accuracy_main),
y = avg_accuracy_main)) +
geom_bar(stat = "identity") +
scale_fill_viridis_d() +
labs(x = "Model",
y = "Accuracy (Afforded vs. Non-Afforded)") +
coord_flip() +
theme_minimal() +
scale_y_continuous(limits = c(0, 1)) +
theme(axis.title = element_text(size=rel(1.2)),
axis.text = element_text(size = rel(1.2)),
legend.text = element_text(size = rel(1.2)),
# legend.title = element_text(size = rel(1.5)),
strip.text.x = element_text(size = rel(1.2)),
legend.position = "none")
mean(df_accuracy$diff_main)
mean(df_accuracy$diff_manipulation_check)
summary(df_accuracy$diff_main)
summary(df_accuracy$diff_manipulation_check)
str(df_accuracy$diff_manipulation_check)
summary(df_accuracy$diff_manipulation_check)
sd(df_accuracy$diff_manipulation_check)
accuracy_by_model = df_accuracy %>%
group_by(model_name, architecture) %>%
summarise(avg_accuracy_main = mean(accuracy_main),
avg_accuracy_manipulation = mean(accuracy_manipulation_check))
accuracy_by_model = df_accuracy %>%
group_by(model_name) %>%
summarise(avg_accuracy_main = mean(accuracy_main),
avg_accuracy_manipulation = mean(accuracy_manipulation_check))
accuracy_by_model
accuracy_by_model %>%
ggplot(aes(x = reorder(model_name, avg_accuracy_main),
y = avg_accuracy_main)) +
geom_bar(stat = "identity") +
scale_fill_viridis_d() +
labs(x = "Model",
y = "Accuracy (Afforded vs. Non-Afforded)") +
coord_flip() +
theme_minimal() +
scale_y_continuous(limits = c(0, 1)) +
theme(axis.title = element_text(size=rel(1.2)),
axis.text = element_text(size = rel(1.2)),
legend.text = element_text(size = rel(1.2)),
# legend.title = element_text(size = rel(1.5)),
strip.text.x = element_text(size = rel(1.2)),
legend.position = "none")
